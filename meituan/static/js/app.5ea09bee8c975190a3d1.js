webpackJsonp([0],{"7Kxv":function(t,s){},"84Y8":function(t,s){},"9oDg":function(t,s){},NHnr:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n("7+uW"),i={props:{poiInfo:{type:Object,default:{}}}},a={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"header"},[this._v("\n  scdadaguo餐厅\n")])},staticRenderFns:[]};var o={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"nav"},[s("router-link",{staticClass:"nav-item",attrs:{to:"/goods"}},[this._v("点餐\n          "),s("i",{staticClass:"line"})]),this._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:"/ratings"}},[this._v("评价\n          "),s("i",{staticClass:"line"})]),this._v(" "),s("router-link",{staticClass:"nav-item",attrs:{to:"/seller"}},[this._v("商家\n          "),s("i",{staticClass:"line"})])],1)},staticRenderFns:[]};var r={name:"App",components:{"app-header":n("VU/8")(i,a,!1,function(t){n("hVCi")},"data-v-67ac1dda",null).exports,"app-nav":n("VU/8")({},o,!1,function(t){n("7Kxv")},"data-v-1b80977a",null).exports},data:function(){return{poiInfo:{}}},created:function(){var t=this;fetch("/api/goods").then(function(t){return t.json()}).then(function(s){0==s.code&&(t.poiInfo=s.data.poi_info)})}},c={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-header",{attrs:{poiInfo:this.poiInfo}}),this._v(" "),s("app-nav"),this._v(" "),s("router-view")],1)},staticRenderFns:[]};var l=n("VU/8")(r,c,!1,function(t){n("s/6O")},null,null).exports,u=n("zO6J"),d=n("GQaK"),v={data:function(){return{container:{},goods:"",listHeight:[],menuScroll:{},foodScroll:{},scrollY:0}},methods:{head_bg:function(t){return"background-image:url("+t+");"},initScroll:function(){var t=this;this.menuScroll=new d.a(this.$refs.menuScroll),this.foodScroll=new d.a(this.$refs.foodScroll,{probeType:3}),this.foodScroll.on("scroll",function(s){t.scrollY=Math.abs(Math.round(s.y))})},selectMenu:function(t){var s=this.$refs.foodScroll.getElementsByClassName("food-list-hook")[t];this.foodScroll.scrollToElement(s,250)},calculateHeight:function(){var t=this.$refs.foodScroll.getElementsByClassName("food-list-hook"),s=0;this.listHeight.push(s);for(var n=0;n<t.length;n++){s+=t[n].clientHeight,this.listHeight.push(s)}}},created:function(){var t=this;fetch("/api/goods").then(function(t){return t.json()}).then(function(s){0==s.code&&(t.container=s.data.container_operation_source,t.goods=s.data.food_spu_tags,t.$nextTick(function(){t.initScroll(),t.calculateHeight()}))})},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var s=this.listHeight[t],n=this.listHeight[t+1];if(!n||this.scrollY>=s&&this.scrollY<n)return t}return 0}}},f={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"goods"},[n("div",{ref:"menuScroll",staticClass:"menu-wrapper"},[n("ul",[n("li",{staticClass:"menu-item",class:{current:0===t.currentIndex},on:{click:function(s){t.selectMenu(0)}}},[n("p",{staticClass:"text"},[t.container.tag_icon?n("img",{staticClass:"icon",attrs:{src:t.container.tag_icon}}):t._e(),t._v("\n          "+t._s(t.container.tag_name)+"\n        ")])]),t._v(" "),t._l(t.goods,function(s,e){return n("li",{key:e,staticClass:"menu-item",class:{current:t.currentIndex===e+1},on:{click:function(s){t.selectMenu(e+1)}}},[n("p",{staticClass:"text"},[s.icon?n("img",{staticClass:"icon",attrs:{src:s.icon}}):t._e(),t._v("\n          "+t._s(s.name)+"\n        ")])])})],2)]),t._v(" "),n("div",{ref:"foodScroll",staticClass:"foods-wrapper"},[n("ul",[n("li",{staticClass:"container-list food-list-hook"},t._l(t.container.operation_source_list,function(t,s){return n("div",{key:s},[n("img",{attrs:{src:t.pic_url}})])})),t._v(" "),t._l(t.goods,function(s,e){return n("li",{key:e,staticClass:"food-list food-list-hook"},[n("h3",{staticClass:"title"},[t._v(t._s(s.name))]),t._v(" "),n("ul",t._l(s.spus,function(s,e){return n("li",{key:e,staticClass:"food-item"},[n("div",{staticClass:"icon",style:t.head_bg(s.picture)}),t._v(" "),n("div",{staticClass:"content"},[n("h3",{staticClass:"name"},[t._v(t._s(s.name))]),t._v(" "),s.description?n("p",{staticClass:"desc"},[t._v(t._s(s.description))]):t._e(),t._v(" "),n("div",{staticClass:"extra"},[n("span",{staticClass:"saled"},[t._v(t._s(s.month_saled_content))]),t._v(" "),n("span",{staticClass:"saled"},[t._v(t._s(s.praise_content))])]),t._v(" "),n("img",{staticClass:"product",attrs:{src:s.product_label_picture,alt:""}}),t._v(" "),n("p",{staticClass:"price"},[n("span",{staticClass:"text"},[t._v("￥"+t._s(s.min_price))]),t._v(" "),n("span",{staticClass:"unit"},[t._v("/"+t._s(s.unit))])])])])}))])})],2)])])},staticRenderFns:[]};var p=n("VU/8")(v,f,!1,function(t){n("v6Rx")},"data-v-53a61885",null).exports,h={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"ratings"},[this._v("\n  评价\n")])},staticRenderFns:[]};var _=n("VU/8")({},h,!1,function(t){n("9oDg")},"data-v-6a58b2d5",null).exports,m={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"seller"},[this._v("\n  商家\n")])},staticRenderFns:[]};var g=n("VU/8")({},m,!1,function(t){n("84Y8")},"data-v-3688b40e",null).exports;e.a.config.productionTip=!1,e.a.use(u.a);var C=[{path:"/",redirect:"/goods"},{path:"/goods",component:p},{path:"/ratings",component:_},{path:"/seller",component:g}],x=new u.a({routes:C,linkActiveClass:"active"});new e.a({router:x,el:"#app",components:{App:l},template:"<App/>"})},hVCi:function(t,s){},"s/6O":function(t,s){},v6Rx:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.5ea09bee8c975190a3d1.js.map